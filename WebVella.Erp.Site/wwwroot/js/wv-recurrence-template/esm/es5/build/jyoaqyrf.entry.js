import{h}from"../wv-recurrence-template.core.js";var RecurrenceTemplate=function(){this.type=0,this.end_type=0,this.end_date=null,this.end_count=1,this.repeat_period_type=0,this.interval=1,this.timespan_start=null,this.timespan_end=null,this.allow_monday=!0,this.allow_tuesday=!0,this.allow_wednesday=!0,this.allow_thursday=!0,this.allow_friday=!0,this.allow_saturday=!0,this.allow_sunday=!0,this.repeat_month_type=0,this.recurrence_change_type=0},WvDatasourceManage=function(){function e(){this.recurrenceTemplate=null,this.templateDefault=null,this.typeOptions=null,this.endTypeOptions=null,this.periodTypeOptions=null,this.changeTypeOptions=null,this.recurrence=new RecurrenceTemplate,this.typeSelectOptions=new Array,this.endTypeSelectOptions=new Array,this.periodTypeSelectOptions=new Array,this.changeTypeSelectOptions=new Array,this.hiddenValue=null,this.initialType=0}return e.prototype.componentWillLoad=function(){this.recurrence=this.recurrenceTemplate?JSON.parse(this.recurrenceTemplate):JSON.parse(this.templateDefault),this.typeSelectOptions=JSON.parse(this.typeOptions),this.endTypeSelectOptions=JSON.parse(this.endTypeOptions),this.periodTypeSelectOptions=JSON.parse(this.periodTypeOptions),this.changeTypeSelectOptions=JSON.parse(this.changeTypeOptions),this.initialType=this.recurrence.type,this.hiddenValue=JSON.stringify(this.recurrence)},e.prototype.valueChangeHandler=function(e,t,r){var n=e.target.value;switch(r){case"number":case"int":this.recurrence[t]=parseInt(n);break;case"date":this.recurrence[t]=n;break;case"bool":this.recurrence[t]=!!e.target.checked;break;case"string":this.recurrence[t]=n}this.hiddenValue=JSON.stringify(this.recurrence)},e.prototype.render=function(){var e=this;return h("div",null,h("input",{type:"hidden",value:e.hiddenValue,name:"recurrence_template"}),h("div",{class:"form-group erp-field label-horizontal row no-gutters form"},h("label",{class:"col-12 col-sm-auto col-form-label label-horizontal pr-0 pr-sm-2"},"Repeat:"),h("div",{class:"col"},h("select",{class:"form-control form-control-sm",onChange:function(t){return e.valueChangeHandler(t,"type","int")}},e.typeSelectOptions.map(function(t,r){return h("option",{key:r,value:t.value,selected:t.value==e.recurrence.type.toString()},t.label)})))),h("div",{class:"mt-3 "+(7===e.recurrence.type?"":"d-none")},h("hr",{class:"divider mt-2 mb-2"}),h("div",{class:"form-group erp-field label-horizontal row no-gutters form"},h("label",{class:"col-12 col-sm-auto col-form-label label-horizontal pr-0 pr-sm-2"},"Repeat every:"),h("div",{class:"col"},h("div",{class:"input-group"},h("input",{class:"form-control flex-grow-0",style:{width:"80px"},value:e.recurrence.interval,onChange:function(t){return e.valueChangeHandler(t,"interval","int")}}),h("span",{class:"input-group-prepend input-group-append"},h("span",{class:"input-group-text p-0",style:{width:"5px"}})),h("select",{class:"form-control form-control-sm  flex-grow-0",style:{width:"100px"},onChange:function(t){return e.valueChangeHandler(t,"repeat_period_type","int")}},e.periodTypeSelectOptions.map(function(t,r){return h("option",{key:r,value:t.value,selected:t.value==e.recurrence.repeat_period_type.toString()},t.label)}))))),h("div",{class:"form-group erp-field label-horizontal row no-gutters form mt-3 "+(4===e.recurrence.repeat_period_type?"":"d-none")},h("label",{class:"col-12 col-sm-auto col-form-label label-horizontal pr-0 pr-sm-2"}),h("div",{class:"col"},h("div",{class:"form-check form-check-inline"},h("input",{class:"form-check-input",type:"checkbox",id:"Monday",value:"true",checked:e.recurrence.allow_monday,onChange:function(t){return e.valueChangeHandler(t,"allow_monday","bool")}}),h("label",{class:"form-check-label",htmlFor:"Monday"},"Monday")),h("div",{class:"form-check form-check-inline"},h("input",{class:"form-check-input",type:"checkbox",id:"Tuesday",value:"true",checked:e.recurrence.allow_tuesday,onChange:function(t){return e.valueChangeHandler(t,"allow_tuesday","bool")}}),h("label",{class:"form-check-label",htmlFor:"Tuesday"},"Tuesday")),h("div",{class:"form-check form-check-inline"},h("input",{class:"form-check-input",type:"checkbox",id:"Wednesday",value:"true",checked:e.recurrence.allow_wednesday,onChange:function(t){return e.valueChangeHandler(t,"allow_wednesday","bool")}}),h("label",{class:"form-check-label",htmlFor:"Wednesday"},"Wednesday")),h("div",{class:"form-check form-check-inline"},h("input",{class:"form-check-input",type:"checkbox",id:"Thursday",value:"true",checked:e.recurrence.allow_thursday,onChange:function(t){return e.valueChangeHandler(t,"allow_thursday","bool")}}),h("label",{class:"form-check-label",htmlFor:"Thursday"},"Thursday")),h("div",{class:"form-check form-check-inline"},h("input",{class:"form-check-input",type:"checkbox",id:"Friday",value:"true",checked:e.recurrence.allow_friday,onChange:function(t){return e.valueChangeHandler(t,"allow_friday","bool")}}),h("label",{class:"form-check-label",htmlFor:"Friday"},"Friday")),h("div",{class:"form-check form-check-inline"},h("input",{class:"form-check-input",type:"checkbox",id:"Saturday",value:"true",checked:e.recurrence.allow_saturday,onChange:function(t){return e.valueChangeHandler(t,"allow_saturday","bool")}}),h("label",{class:"form-check-label",htmlFor:"Saturday"},"Saturday")),h("div",{class:"form-check form-check-inline"},h("input",{class:"form-check-input",type:"checkbox",id:"Sunday",value:"true",checked:e.recurrence.allow_sunday,onChange:function(t){return e.valueChangeHandler(t,"allow_sunday","bool")}}),h("label",{class:"form-check-label",htmlFor:"Sunday"},"Sunday")))),h("div",{class:"form-group erp-field label-horizontal row no-gutters form mt-3 "+(5===e.recurrence.repeat_period_type?"":"d-none")},h("label",{class:"col-12 col-sm-auto col-form-label label-horizontal pr-0 pr-sm-2"}),h("div",{class:"col"},h("div",{class:"form-check form-check-inline"},h("input",{class:"form-check-input",type:"radio",name:"monthPeriodOptions",id:"sameDate",value:"0",checked:0===e.recurrence.repeat_month_type,onChange:function(t){return e.valueChangeHandler(t,"repeat_month_type","int")}}),h("label",{class:"form-check-label",htmlFor:"sameDate"},"same date")),h("div",{class:"form-check form-check-inline"},h("input",{class:"form-check-input",type:"radio",name:"monthPeriodOptions",id:"sameWeekDay",value:"1",checked:1===e.recurrence.repeat_month_type,onChange:function(t){return e.valueChangeHandler(t,"repeat_month_type","int")}}),h("label",{class:"form-check-label",htmlFor:"sameWeekDay"},"same week day")))),h("hr",{class:"divider mt-2 mb-2"})),h("div",{class:"mt-3 "+(0===e.initialType?"d-none":"")},h("div",{class:"form-group erp-field label-horizontal row no-gutters form"},h("label",{class:"col-12 col-sm-auto col-form-label label-horizontal pr-0 pr-sm-2"},"Apply to:"),h("div",{class:"col"},h("select",{class:"form-control form-control-sm",onChange:function(t){return e.valueChangeHandler(t,"recurrence_change_type","int")}},e.changeTypeSelectOptions.map(function(t,r){return h("option",{key:r,value:t.value,selected:t.value==e.recurrence.recurrence_change_type.toString()},t.label)}))))))},Object.defineProperty(e,"is",{get:function(){return"wv-recurrence-template"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{changeTypeOptions:{type:String,attr:"change-type-options"},changeTypeSelectOptions:{state:!0},endTypeOptions:{type:String,attr:"end-type-options"},endTypeSelectOptions:{state:!0},hiddenValue:{state:!0},initialType:{state:!0},periodTypeOptions:{type:String,attr:"period-type-options"},periodTypeSelectOptions:{state:!0},recurrence:{state:!0},recurrenceTemplate:{type:String,attr:"recurrence-template"},templateDefault:{type:String,attr:"template-default"},typeOptions:{type:String,attr:"type-options"},typeSelectOptions:{state:!0}}},enumerable:!0,configurable:!0}),e}();export{WvDatasourceManage as WvRecurrenceTemplate};